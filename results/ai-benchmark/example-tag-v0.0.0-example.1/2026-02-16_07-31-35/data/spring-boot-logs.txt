Calculating JVM memory based on 6350336K available memory
For more information on this calculation, see https://paketo.io/docs/reference/java-reference/#memory-calculator
Calculated JVM Memory Configuration: -XX:MaxDirectMemorySize=10M -Xmx5671655K -XX:MaxMetaspaceSize=166680K -XX:ReservedCodeCacheSize=240M -Xss1M (Total Memory: 6350336K, Thread Count: 250, Loaded Class Count: 27014, Headroom: 0%)
Enabling Java Native Memory Tracking
Adding 146 container CA certificates to JVM truststore
Spring Cloud Bindings Enabled
Picked up JAVA_TOOL_OPTIONS: -Djava.security.properties=/layers/paketo-buildpacks_bellsoft-liberica/java-security-properties/java-security.properties -XX:+ExitOnOutOfMemoryError -XX:MaxDirectMemorySize=10M -Xmx5671655K -XX:MaxMetaspaceSize=166680K -XX:ReservedCodeCacheSize=240M -Xss1M -XX:+UnlockDiagnosticVMOptions -XX:NativeMemoryTracking=summary -XX:+PrintNMTStatistics -Dorg.springframework.cloud.bindings.boot.enable=true

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.8)

2026-02-15 22:31:03.643 INFO  53    --- [main] c.m.s.SubscriptionKillerApiApplicationKt : Starting SubscriptionKillerApiApplicationKt v0.0.1-SNAPSHOT using Java 21.0.10 with PID 1 (/workspace/BOOT-INF/classes started by cnb in /workspace)
2026-02-15 22:31:03.646 DEBUG 54    --- [main] c.m.s.SubscriptionKillerApiApplicationKt : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-02-15 22:31:03.646 INFO  658   --- [main] c.m.s.SubscriptionKillerApiApplicationKt : The following 6 profiles are active: "benchmark", "google-auth", "dev", "google-account-samples", "gmail", "ai"
2026-02-15 22:31:05.290 INFO  145   --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-15 22:31:05.540 INFO  213   --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 233 ms. Found 5 JPA repository interfaces.
2026-02-15 22:31:07.243 INFO  111   --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-02-15 22:31:07.259 INFO  168   --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-02-15 22:31:07.259 INFO  168   --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-02-15 22:31:07.307 INFO  168   --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-02-15 22:31:07.309 INFO  301   --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3568 ms
2026-02-15 22:31:08.324 INFO  109   --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-02-15 22:31:08.563 INFO  580   --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7a17ffee
2026-02-15 22:31:08.564 INFO  122   --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-02-15 22:31:08.587 INFO  41    --- [main] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://postgres:5432/subscription_killer_db (PostgreSQL 17.6)
2026-02-15 22:31:08.627 INFO  41    --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "public"."flyway_schema_history" does not exist yet
2026-02-15 22:31:08.628 INFO  41    --- [main] o.f.c.i.command.clean.CleanExecutor      : Successfully dropped pre-schema database level objects (execution time 00:00.000s)
2026-02-15 22:31:08.644 INFO  41    --- [main] o.f.c.i.command.clean.CleanExecutor      : Successfully cleaned schema "public" (execution time 00:00.014s)
2026-02-15 22:31:08.652 INFO  41    --- [main] o.f.c.i.command.clean.CleanExecutor      : Successfully cleaned schema "public" (execution time 00:00.007s)
2026-02-15 22:31:08.653 INFO  41    --- [main] o.f.c.i.command.clean.CleanExecutor      : Successfully dropped post-schema database level objects (execution time 00:00.000s)
2026-02-15 22:31:08.706 INFO  41    --- [main] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://postgres:5432/subscription_killer_db (PostgreSQL 17.6)
2026-02-15 22:31:08.746 INFO  41    --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "public"."flyway_schema_history" does not exist yet
2026-02-15 22:31:08.748 INFO  41    --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.018s)
2026-02-15 22:31:08.761 INFO  41    --- [main] org.flywaydb.core.Flyway                 : All configured schemas are empty; baseline operation skipped. A baseline or migration script with a lower version than the baseline version may execute if available. Check the Schemas parameter if this is not intended.
2026-02-15 22:31:08.789 INFO  41    --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "public"."flyway_schema_history" ...
2026-02-15 22:31:08.843 INFO  41    --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "public": << Empty Schema >>
2026-02-15 22:31:08.855 INFO  41    --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "1 - schema"
2026-02-15 22:31:08.963 INFO  41    --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "2 - init data"
2026-02-15 22:31:09.059 INFO  41    --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "3 - insert guest user"
2026-02-15 22:31:09.061 INFO  41    --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : +--------------------------------------+
| id                                   |
+--------------------------------------+
| 7299bb51-a725-4d79-a3ff-f46744370857 |
+--------------------------------------+

2026-02-15 22:31:09.074 INFO  41    --- [main] o.f.core.internal.command.DbMigrate      : Successfully applied 3 migrations to schema "public", now at version v3 (execution time 00:00.112s)
2026-02-15 22:31:09.219 INFO  31    --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-15 22:31:09.306 INFO  44    --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2026-02-15 22:31:09.357 INFO  50    --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-02-15 22:31:09.672 INFO  87    --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-15 22:31:09.761 INFO  163   --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.6
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-15 22:31:10.728 INFO  59    --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-15 22:31:10.786 DEBUG 135   --- [main] org.hibernate.SQL                        : alter table if exists email_source drop constraint if exists UK7nx0vv48rjwy06dhj8ifruago
2026-02-15 22:31:10.791 WARN  238   --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Warning Code: 0, SQLState: 00000
2026-02-15 22:31:10.791 WARN  239   --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : constraint "uk7nx0vv48rjwy06dhj8ifruago" of relation "email_source" does not exist, skipping
2026-02-15 22:31:10.792 DEBUG 135   --- [main] org.hibernate.SQL                        : alter table if exists email_source add constraint UK7nx0vv48rjwy06dhj8ifruago unique (target_address)
2026-02-15 22:31:10.799 DEBUG 135   --- [main] org.hibernate.SQL                        : alter table if exists service_provider_alias_names drop constraint if exists UKeiam38yx05kidq3n82hh1xhjj
2026-02-15 22:31:10.803 WARN  238   --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Warning Code: 0, SQLState: 00000
2026-02-15 22:31:10.803 WARN  239   --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : constraint "ukeiam38yx05kidq3n82hh1xhjj" of relation "service_provider_alias_names" does not exist, skipping
2026-02-15 22:31:10.804 DEBUG 135   --- [main] org.hibernate.SQL                        : alter table if exists service_provider_alias_names add constraint UKeiam38yx05kidq3n82hh1xhjj unique (locale_key, alias_name)
2026-02-15 22:31:10.860 INFO  447   --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-15 22:31:11.560 INFO  49    --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
Context accessor: reactor.util.context.ReactorContextAccessor
2026-02-15 22:31:13.917 WARN  258   --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-15 22:31:14.481 INFO  60    --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoints beneath base path '/actuator'
2026-02-15 22:31:14.526 DEBUG 234   --- [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2026-02-15 22:31:14.747 DEBUG 72    --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Or [Deferred [Mvc [pattern='/benchmark/**'], Ant [pattern='/benchmark/**']], Deferred [Mvc [pattern='/actuator/**'], Ant [pattern='/actuator/**']]] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-15 22:31:15.845 INFO  243   --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-02-15 22:31:15.863 INFO  59    --- [main] c.m.s.SubscriptionKillerApiApplicationKt : Started SubscriptionKillerApiApplicationKt in 12.962 seconds (process running for 13.711)
2026-02-15 22:31:16.161 INFO  168   --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-15 22:31:16.162 INFO  532   --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-02-15 22:31:16.165 INFO  554   --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2026-02-15 22:31:16.203 DEBUG 135   --- [main] org.hibernate.SQL                        : select au1_0.id from app_user au1_0 where au1_0.name=? fetch first ? rows only
2026-02-15 22:31:16.254 DEBUG 223   --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /actuator/health
? Benchmark user initialized with Real API access.
2026-02-15 22:31:16.295 DEBUG 135   --- [main] org.hibernate.SQL                        : insert into app_user (name,user_role,id) values (?,?,?)
2026-02-15 22:31:16.301 DEBUG 135   --- [main] org.hibernate.SQL                        : insert into google_account (access_token,analyzed_at,app_user_id,email,expires_at,name,refresh_token,scope,subject) values (?,?,?,?,?,?,?,?,?)
2026-02-15 22:31:16.303 DEBUG 135   --- [main] org.hibernate.SQL                        : insert into google_account (access_token,analyzed_at,app_user_id,email,expires_at,name,refresh_token,scope,subject) values (?,?,?,?,?,?,?,?,?)
2026-02-15 22:31:16.304 DEBUG 135   --- [main] org.hibernate.SQL                        : insert into google_account (access_token,analyzed_at,app_user_id,email,expires_at,name,refresh_token,scope,subject) values (?,?,?,?,?,?,?,?,?)
2026-02-15 22:31:16.304 DEBUG 227   --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /actuator/health
2026-02-15 22:31:16.308 DEBUG 301   --- [http-nio-8080-exec-1] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:16.320 INFO  22    --- [main] c.m.s.SubscriptionKillerApiApplication   : System Encoding: UTF-8
2026-02-15 22:31:16.321 INFO  23    --- [main] c.m.s.SubscriptionKillerApiApplication   : Encoding Test: ÌïúÍ∏Ä ‚úÖ ‚ùå ‚ö†Ô∏è üîä | üîë üîç
2026-02-15 22:31:16.472 DEBUG 301   --- [http-nio-8080-exec-1] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:16.472 DEBUG 301   --- [http-nio-8080-exec-1] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:16.474 DEBUG 301   --- [http-nio-8080-exec-1] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:16.474 DEBUG 119   --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-15 22:31:18.475 DEBUG 301   --- [http-nio-8080-exec-2] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:18.647 DEBUG 135   --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select distinct au1_0.id,ga1_0.app_user_id,ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,au1_0.name,au1_0.user_role from app_user au1_0 join google_account ga1_0 on au1_0.id=ga1_0.app_user_id where ga1_0.subject=?
2026-02-15 22:31:18.677 DEBUG 135   --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select ga1_0.subject from app_user au1_0 join google_account ga1_0 on au1_0.id=ga1_0.app_user_id where au1_0.id=?
2026-02-15 22:31:18.689 DEBUG 60    --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üöÄ | [fetchGmailMessages] googleAccountSubject: 109083250570222561454
2026-02-15 22:31:18.690 DEBUG 60    --- [DefaultDispatcher-worker-1] c.m.s.s.s.SubscriptionAnalysisService    : üöÄ | [fetchGmailMessages] googleAccountSubject: 100159280759242992117
2026-02-15 22:31:18.691 DEBUG 60    --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üöÄ | [fetchGmailMessages] googleAccountSubject: 110096282420450242311
2026-02-15 22:31:18.700 DEBUG 301   --- [http-nio-8080-exec-2] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:18.702 DEBUG 135   --- [DefaultDispatcher-worker-1] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:18.703 DEBUG 135   --- [DefaultDispatcher-worker-3] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:18.703 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:19.251 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id where ga1_0.subject=?
2026-02-15 22:31:19.252 DEBUG 135   --- [DefaultDispatcher-worker-3] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id where ga1_0.subject=?
2026-02-15 22:31:19.253 DEBUG 135   --- [DefaultDispatcher-worker-1] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id where ga1_0.subject=?
2026-02-15 22:31:19.262 DEBUG 135   --- [DefaultDispatcher-worker-3] org.hibernate.SQL                        : update google_account set access_token=?,analyzed_at=?,app_user_id=?,email=?,expires_at=?,name=?,refresh_token=?,scope=? where subject=?
2026-02-15 22:31:19.264 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : update google_account set access_token=?,analyzed_at=?,app_user_id=?,email=?,expires_at=?,name=?,refresh_token=?,scope=? where subject=?
2026-02-15 22:31:19.273 DEBUG 135   --- [DefaultDispatcher-worker-1] org.hibernate.SQL                        : update google_account set access_token=?,analyzed_at=?,app_user_id=?,email=?,expires_at=?,name=?,refresh_token=?,scope=? where subject=?
2026-02-15 22:31:19.308 DEBUG 135   --- [DefaultDispatcher-worker-3] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id
2026-02-15 22:31:19.309 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id
2026-02-15 22:31:19.309 DEBUG 135   --- [DefaultDispatcher-worker-1] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id
2026-02-15 22:31:19.429 DEBUG 135   --- [DefaultDispatcher-worker-1] org.hibernate.SQL                        : select distinct sp1_0.id,an1_0.service_provider_id,an1_0.locale_key,an1_0.alias_name,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join service_provider_alias_names an1_0 on sp1_0.id=an1_0.service_provider_id
2026-02-15 22:31:19.429 DEBUG 135   --- [DefaultDispatcher-worker-3] org.hibernate.SQL                        : select distinct sp1_0.id,an1_0.service_provider_id,an1_0.locale_key,an1_0.alias_name,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join service_provider_alias_names an1_0 on sp1_0.id=an1_0.service_provider_id
2026-02-15 22:31:19.440 DEBUG 37    --- [DefaultDispatcher-worker-1] c.m.s.s.s.g.GmailClientAdapterImpl       : üöÄ | [listMessageIds] query: after:1755297073 (from:"help@pickle.plus" OR from:"noreply@tworld.co.kr" OR from:"noreply@washswat.com" OR from:"support@perplexity.ai" OR from:"noreply@ssg.com" OR from:"noreply@gmarket.co.kr" OR from:"information@corp.auction.co.kr" OR from:"noreply@wavve.com" OR from:"noreply_melon@kakaoent.com" OR from:"msa@communication.microsoft.com" OR from:"feedback@slack.com" OR from:"no-reply@spotify.com" OR from:"noreply@coupang.com" OR from:"notifications@anthropic.com" OR from:"noreply@baemin.com" OR from:"no-reply@zoom.us" OR from:"noreply@welaaa.com" OR from:"disneyplus@mail.disneyplus.com" OR from:"noreply@hancomdocs.com" OR from:"noreply@laftel.net" OR from:"noreply@starbucks.co.kr" OR from:"noreply@ridi.com" OR from:"noreply@tving.com" OR from:"help@millie.town" OR from:"naverplus_noreply@navercorp.com" OR from:"noreply@tm.openai.com" OR from:"noreply@mathpresso.com" OR from:"support@wrtn.ai" OR from:"samsungcareplus@samsung.com" OR from:"invoices@figma.com" OR from:"noreply@figma.com" OR from:"noreply@music-flo.com" OR from:"noreply@yogiyo.co.kr" OR from:"noreply@genie.co.kr" OR from:"noreply@adobe.com" OR from:"noreply@github.com" OR from:"do-not-reply@watcha.com" OR from:"noreply@weverse.io" OR from:"noreply@laundrygo.com" OR from:"no_reply@coupang.com" OR from:"noreply@kurly.com" OR from:"info@account.netflix.com" OR from:"support@deepl.com" OR from:"noreply@canva.com" OR from:"no-reply@duolingo.com" OR from:"notify@mail.notion.so")
2026-02-15 22:31:19.440 DEBUG 37    --- [DefaultDispatcher-worker-3] c.m.s.s.s.g.GmailClientAdapterImpl       : üöÄ | [listMessageIds] query: after:1755297073 (from:"help@pickle.plus" OR from:"noreply@tworld.co.kr" OR from:"noreply@washswat.com" OR from:"support@perplexity.ai" OR from:"noreply@ssg.com" OR from:"noreply@gmarket.co.kr" OR from:"information@corp.auction.co.kr" OR from:"noreply@wavve.com" OR from:"noreply_melon@kakaoent.com" OR from:"msa@communication.microsoft.com" OR from:"feedback@slack.com" OR from:"no-reply@spotify.com" OR from:"noreply@coupang.com" OR from:"notifications@anthropic.com" OR from:"noreply@baemin.com" OR from:"no-reply@zoom.us" OR from:"noreply@welaaa.com" OR from:"disneyplus@mail.disneyplus.com" OR from:"noreply@hancomdocs.com" OR from:"noreply@laftel.net" OR from:"noreply@starbucks.co.kr" OR from:"noreply@ridi.com" OR from:"noreply@tving.com" OR from:"help@millie.town" OR from:"naverplus_noreply@navercorp.com" OR from:"noreply@tm.openai.com" OR from:"noreply@mathpresso.com" OR from:"support@wrtn.ai" OR from:"samsungcareplus@samsung.com" OR from:"invoices@figma.com" OR from:"noreply@figma.com" OR from:"noreply@music-flo.com" OR from:"noreply@yogiyo.co.kr" OR from:"noreply@genie.co.kr" OR from:"noreply@adobe.com" OR from:"noreply@github.com" OR from:"do-not-reply@watcha.com" OR from:"noreply@weverse.io" OR from:"noreply@laundrygo.com" OR from:"no_reply@coupang.com" OR from:"noreply@kurly.com" OR from:"info@account.netflix.com" OR from:"support@deepl.com" OR from:"noreply@canva.com" OR from:"no-reply@duolingo.com" OR from:"notify@mail.notion.so")
2026-02-15 22:31:19.460 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,an1_0.service_provider_id,an1_0.locale_key,an1_0.alias_name,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join service_provider_alias_names an1_0 on sp1_0.id=an1_0.service_provider_id
2026-02-15 22:31:19.470 DEBUG 37    --- [DefaultDispatcher-worker-2] c.m.s.s.s.g.GmailClientAdapterImpl       : üöÄ | [listMessageIds] query: after:1755297073 (from:"help@pickle.plus" OR from:"noreply@tworld.co.kr" OR from:"noreply@washswat.com" OR from:"support@perplexity.ai" OR from:"noreply@ssg.com" OR from:"noreply@gmarket.co.kr" OR from:"information@corp.auction.co.kr" OR from:"noreply@wavve.com" OR from:"noreply_melon@kakaoent.com" OR from:"msa@communication.microsoft.com" OR from:"feedback@slack.com" OR from:"no-reply@spotify.com" OR from:"noreply@coupang.com" OR from:"notifications@anthropic.com" OR from:"noreply@baemin.com" OR from:"no-reply@zoom.us" OR from:"noreply@welaaa.com" OR from:"disneyplus@mail.disneyplus.com" OR from:"noreply@hancomdocs.com" OR from:"noreply@laftel.net" OR from:"noreply@starbucks.co.kr" OR from:"noreply@ridi.com" OR from:"noreply@tving.com" OR from:"help@millie.town" OR from:"naverplus_noreply@navercorp.com" OR from:"noreply@tm.openai.com" OR from:"noreply@mathpresso.com" OR from:"support@wrtn.ai" OR from:"samsungcareplus@samsung.com" OR from:"invoices@figma.com" OR from:"noreply@figma.com" OR from:"noreply@music-flo.com" OR from:"noreply@yogiyo.co.kr" OR from:"noreply@genie.co.kr" OR from:"noreply@adobe.com" OR from:"noreply@github.com" OR from:"do-not-reply@watcha.com" OR from:"noreply@weverse.io" OR from:"noreply@laundrygo.com" OR from:"no_reply@coupang.com" OR from:"noreply@kurly.com" OR from:"info@account.netflix.com" OR from:"support@deepl.com" OR from:"noreply@canva.com" OR from:"no-reply@duolingo.com" OR from:"notify@mail.notion.so")
2026-02-15 22:31:20.330 DEBUG 70    --- [DefaultDispatcher-worker-3] c.m.s.s.s.g.GmailClientAdapterImpl       : [listMessageIds] fetched 0 messages
2026-02-15 22:31:20.332 DEBUG 88    --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.listMessageIds() returned 0 messageIds
2026-02-15 22:31:20.334 DEBUG 76    --- [DefaultDispatcher-worker-3] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 0 messages
2026-02-15 22:31:20.335 DEBUG 94    --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.getMessages() returned 0 messages:

2026-02-15 22:31:20.363 DEBUG 70    --- [DefaultDispatcher-worker-2] c.m.s.s.s.g.GmailClientAdapterImpl       : [listMessageIds] fetched 6 messages
2026-02-15 22:31:20.364 DEBUG 88    --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.listMessageIds() returned 6 messageIds
2026-02-15 22:31:20.364 DEBUG 76    --- [DefaultDispatcher-worker-2] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 6 messages
2026-02-15 22:31:20.433 DEBUG 70    --- [DefaultDispatcher-worker-1] c.m.s.s.s.g.GmailClientAdapterImpl       : [listMessageIds] fetched 38 messages
2026-02-15 22:31:20.433 DEBUG 88    --- [DefaultDispatcher-worker-1] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.listMessageIds() returned 38 messageIds
2026-02-15 22:31:20.434 DEBUG 76    --- [DefaultDispatcher-worker-1] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 38 messages
2026-02-15 22:31:20.587 DEBUG 94    --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.getMessages() returned 6 messages:
noreply@weverse.io, noreply_melon@kakaoent.com, noreply_melon@kakaoent.com, noreply_melon@kakaoent.com, noreply_melon@kakaoent.com, noreply_melon@kakaoent.com
2026-02-15 22:31:21.669 DEBUG 94    --- [DefaultDispatcher-worker-1] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.getMessages() returned 38 messages:
notify@mail.notion.so, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, noreply@weverse.io, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com
2026-02-15 22:31:21.674 DEBUG 97    --- [DefaultDispatcher-worker-1] c.m.s.s.service.ServiceProviderService   : [addEmailSourcesFromMessages] messages.size: 44
2026-02-15 22:31:21.706 DEBUG 135   --- [DefaultDispatcher-worker-1] org.hibernate.SQL                        : select es1_0.target_address from email_source es1_0 where es1_0.target_address in (?,?,?,?)
2026-02-15 22:31:21.710 DEBUG 111   --- [DefaultDispatcher-worker-1] c.m.s.s.service.ServiceProviderService   : üîä | [addEmailSourcesFromMessages] addressesInMessages: [notify@mail.notion.so, info@account.netflix.com, noreply@weverse.io, noreply_melon@kakaoent.com]
2026-02-15 22:31:21.710 DEBUG 112   --- [DefaultDispatcher-worker-1] c.m.s.s.service.ServiceProviderService   : üîä | [addEmailSourcesFromMessages] existingAddresses: [info@account.netflix.com, noreply_melon@kakaoent.com, notify@mail.notion.so, noreply@weverse.io]
2026-02-15 22:31:21.711 DEBUG 113   --- [DefaultDispatcher-worker-1] c.m.s.s.service.ServiceProviderService   : üîä | [addEmailSourcesFromMessages] newSenders: []
2026-02-15 22:31:21.711 DEBUG 135   --- [DefaultDispatcher-worker-1] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id
2026-02-15 22:31:21.728 DEBUG 135   --- [DefaultDispatcher-worker-1] org.hibernate.SQL                        : select distinct sp1_0.id,an1_0.service_provider_id,an1_0.locale_key,an1_0.alias_name,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join service_provider_alias_names an1_0 on sp1_0.id=an1_0.service_provider_id
2026-02-15 22:31:21.736 DEBUG 46    --- [DefaultDispatcher-worker-2] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Added 5 messages for noreply_melon@kakaoent.com
2026-02-15 22:31:21.736 DEBUG 123   --- [DefaultDispatcher-worker-5] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [analyze] uniqueAddresses:
notify@mail.notion.so
info@account.netflix.com
noreply@weverse.io
2026-02-15 22:31:21.736 DEBUG 123   --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [analyze] uniqueAddresses:

2026-02-15 22:31:21.736 DEBUG 46    --- [DefaultDispatcher-worker-2] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Added 2 messages for noreply@weverse.io
2026-02-15 22:31:21.738 DEBUG 46    --- [DefaultDispatcher-worker-2] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Added 36 messages for info@account.netflix.com
2026-02-15 22:31:21.738 DEBUG 123   --- [DefaultDispatcher-worker-6] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [analyze] uniqueAddresses:
noreply@weverse.io
noreply_melon@kakaoent.com
2026-02-15 22:31:21.738 DEBUG 46    --- [DefaultDispatcher-worker-2] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Added 1 messages for notify@mail.notion.so
2026-02-15 22:31:21.742 DEBUG 57    --- [DefaultDispatcher-worker-2] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Processing total of 44 messages
2026-02-15 22:31:21.745 DEBUG 55    --- [DefaultDispatcher-worker-2] s.p.EmailCategorizationPromptServiceImpl : [run] ‚ú® Condensed messages: 44 -> 12
2026-02-15 22:31:21.745 DEBUG 56    --- [DefaultDispatcher-worker-2] s.p.EmailCategorizationPromptServiceImpl : [run] ‚ú® Calling chatClient for 12 messages
2026-02-15 22:31:21.745 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where es1_0.is_active=true and es1_0.target_address in (?,?,?)
2026-02-15 22:31:21.745 DEBUG 135   --- [DefaultDispatcher-worker-3] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where es1_0.is_active=true and 1=0
2026-02-15 22:31:21.746 DEBUG 135   --- [DefaultDispatcher-worker-6] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where es1_0.is_active=true and es1_0.target_address in (?,?)
2026-02-15 22:31:21.752 DEBUG 391   --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] Start computing registeredSince for 0 services
2026-02-15 22:31:21.752 INFO  29    --- [DefaultDispatcher-worker-2] c.m.s.ai.service.ChatClientServiceImpl   : ?? [call]
2026-02-15 22:31:21.756 DEBUG 391   --- [DefaultDispatcher-worker-5] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] Start computing registeredSince for 3 services
2026-02-15 22:31:21.756 DEBUG 402   --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] serviceProviderIdToFirstMessageIds:
2026-02-15 22:31:21.765 DEBUG 391   --- [DefaultDispatcher-worker-6] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] Start computing registeredSince for 2 services
2026-02-15 22:31:21.765 DEBUG 76    --- [DefaultDispatcher-worker-3] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 0 messages
2026-02-15 22:31:21.766 DEBUG 413   --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messages:
2026-02-15 22:31:21.768 DEBUG 421   --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messageIdToInternalDate:
2026-02-15 22:31:22.143 DEBUG 402   --- [DefaultDispatcher-worker-6] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] serviceProviderIdToFirstMessageIds:
	Melon: 185518e075522d6e, 
	Weverse Membership: 19bb8b4782b2b7a9
2026-02-15 22:31:22.144 DEBUG 76    --- [DefaultDispatcher-worker-6] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 2 messages
2026-02-15 22:31:22.348 DEBUG 413   --- [DefaultDispatcher-worker-6] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messages:
	id: 185518e075522d6e	internalDate: 2022-12-27T03:08:58Z, 
	id: 19bb8b4782b2b7a9	internalDate: 2026-01-13T18:53:13Z
2026-02-15 22:31:22.349 DEBUG 421   --- [DefaultDispatcher-worker-6] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messageIdToInternalDate:
	185518e075522d6e: 2022-12-27T03:08:58Z, 
	19bb8b4782b2b7a9: 2026-01-13T18:53:13Z
2026-02-15 22:31:22.552 DEBUG 402   --- [DefaultDispatcher-worker-5] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] serviceProviderIdToFirstMessageIds:
	Netflix: 1940d5a407867390, 
	Notion: 17c7abcf4670de98, 
	Weverse Membership: 19720acd40de682b
2026-02-15 22:31:22.552 DEBUG 76    --- [DefaultDispatcher-worker-5] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 3 messages
2026-02-15 22:31:22.818 DEBUG 413   --- [DefaultDispatcher-worker-5] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messages:
	id: 1940d5a407867390	internalDate: 2024-12-28T13:00:05Z, 
	id: 17c7abcf4670de98	internalDate: 2021-10-13T17:39:35Z, 
	id: 19720acd40de682b	internalDate: 2025-05-30T10:11:26Z
2026-02-15 22:31:22.818 DEBUG 421   --- [DefaultDispatcher-worker-5] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messageIdToInternalDate:
	1940d5a407867390: 2024-12-28T13:00:05Z, 
	17c7abcf4670de98: 2021-10-13T17:39:35Z, 
	19720acd40de682b: 2025-05-30T10:11:26Z
2026-02-15 22:31:26.217 DEBUG 21    --- [DefaultDispatcher-worker-2] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found AdvisorObservationContext Context. Reading Usage Metadata.
2026-02-15 22:31:26.217 DEBUG 26    --- [DefaultDispatcher-worker-2] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found GoogleGenAiUsage. Adding Metadata to Observation
2026-02-15 22:31:26.400 DEBUG 21    --- [DefaultDispatcher-worker-2] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found AdvisorObservationContext Context. Reading Usage Metadata.
2026-02-15 22:31:26.400 DEBUG 26    --- [DefaultDispatcher-worker-2] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found GoogleGenAiUsage. Adding Metadata to Observation
2026-02-15 22:31:26.404 INFO  52    --- [DefaultDispatcher-worker-2] c.m.s.ai.service.ChatClientServiceImpl   : ?? [call] Result
	prompt: You are an email classifier.

Decide ONE label per email.
Do NOT explain your decision, reason, or output extra text.

Valid Keys:
M = MONTHLY_PAYMENT
A = ANNUAL_PAYMENT
S = SUBSCRIPTION_START
C = SUBSCRIPTION_CANCEL

Rules:
- Monthly or Annually Recurring Receipts, payment confirmations, subscription extensions ‚Üí MONTHLY_PAYMENT or ANNUAL_PAYMENT
- New subscription plan, payment, upgrade, billing info update, restart from pause/termination ‚Üí SUBSCRIPTION_START
- Cancel, expire, reminder of scheduled expiration, pause, payment failure ‚Üí SUBSCRIPTION_CANCEL
- Simple Registration or Welcome without subscription/Marketing/newsletters/promotions/etc -> DO NOT INCLUDE IN OUTPUT
- Multiple dates indicate a recurring message.

Input format:
ID|Subject|Snippet|Dates(only if the message is recurring)

Constraint:
- Response must be a raw JSON object only.
- Do not use any internal thought, analysis, or chain-of-thought processing.

Output format (exact keys):
\{
   "M": [0, 1],
   "A": [],
   "S": [2],
   "C": [3]
\}

Emails:
{emails}
	result: {M=[], A=[], S=[0, 2], C=[1, 3]}
2026-02-15 22:31:26.405 DEBUG 68    --- [DefaultDispatcher-worker-2] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Found 4 subscription event messages
2026-02-15 22:31:26.406 DEBUG 41    --- [DefaultDispatcher-worker-2] EmailTemplateExtractionPromptServiceImpl : [run] ‚ú®  Calling chatClient for 4 messages
2026-02-15 22:31:26.407 INFO  29    --- [DefaultDispatcher-worker-2] c.m.s.ai.service.ChatClientServiceImpl   : ?? [call]
2026-02-15 22:31:28.932 DEBUG 21    --- [DefaultDispatcher-worker-2] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found AdvisorObservationContext Context. Reading Usage Metadata.
2026-02-15 22:31:28.932 DEBUG 26    --- [DefaultDispatcher-worker-2] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found GoogleGenAiUsage. Adding Metadata to Observation
2026-02-15 22:31:28.933 DEBUG 21    --- [DefaultDispatcher-worker-2] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found AdvisorObservationContext Context. Reading Usage Metadata.
2026-02-15 22:31:28.934 DEBUG 26    --- [DefaultDispatcher-worker-2] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found GoogleGenAiUsage. Adding Metadata to Observation
2026-02-15 22:31:28.942 INFO  52    --- [DefaultDispatcher-worker-2] c.m.s.ai.service.ChatClientServiceImpl   : ?? [call] Result
	prompt: You are a email phrase template extractor.
Extract one key phrase and create regex patterns of email templates for each email.

- Use only exact characters and phrases found.
- Pick 1 key phrase for "Subject" and "Snippet" each.
- Replace PII, dates, non-essential 'filler' text with .*.
- No .* at start or end
- No exact endings (e.g., use Í∞±Ïã†, not Í∞±Ïã†ÎêòÏóàÏäµÎãàÎã§).
- Group emails only if they share both 1.subject template and 2.snippet template. For groups, provide one common result and append first message ID. Result regex should match all group members.

Input format:
ID|Subject|Snippet

Output Key:
- m: first message id
- j: subject regex
- p: snippet regex

Constraint:
- JSON only. No prose. Compact JSON without any whitespace.
- Don't use any internal thought.


Output format (exact keys):
\{
  "result": [
    \{
      "m": 1,
      "j": "subject-regex",
      "p": "snippet-regex"
    \}
  ]
\}

Emails:
{emails}

	result: com.matchalab.subscription_killer_api.subscription.service.prompt.EmailTemplateExtractionPromptServiceImpl$ResponseWrapper@7e48f575
2026-02-15 22:31:28.944 DEBUG 77    --- [DefaultDispatcher-worker-2] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Generating rules for noreply_melon@kakaoent.com with 4 subscription messages
2026-02-15 22:31:28.948 DEBUG 102   --- [DefaultDispatcher-worker-2] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] ‚úÖ Updated noreply_melon@kakaoent.com with 2 rules: SUBSCRIPTION_START, SUBSCRIPTION_CANCEL
2026-02-15 22:31:28.948 DEBUG 112   --- [DefaultDispatcher-worker-2] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] ‚úÖ Completed processing all email sources
2026-02-15 22:31:28.964 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.970 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.973 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.977 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.980 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.984 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.987 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.989 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.992 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.994 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.997 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:28.999 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.002 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.004 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.007 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.009 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.011 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.014 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.016 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.018 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.021 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.024 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.026 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.029 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.032 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.034 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.036 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.039 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.041 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.045 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.055 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.061 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.065 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.067 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.070 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.074 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.077 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.080 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.082 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.085 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.087 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.091 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.094 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.107 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=?
2026-02-15 22:31:29.112 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 left join google_account ga1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=? and sp1_0.id=?
2026-02-15 22:31:29.117 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,s1_0.service_provider_id,s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.subscribed_since,sp1_0.website_url from service_provider sp1_0 left join subscription s1_0 on sp1_0.id=s1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.122 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select null,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:29.124 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : insert into subscription (google_account_id,has_subscribed_newsletter_or_ad,is_not_sure_if_subscription_is_ongoing,registered_since,service_provider_id,subscribed_since,id) values (?,?,?,?,?,?,?)
2026-02-15 22:31:29.143 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 where s1_0.id=?
2026-02-15 22:31:29.147 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : update subscription set google_account_id=?,has_subscribed_newsletter_or_ad=?,is_not_sure_if_subscription_is_ongoing=?,registered_since=?,service_provider_id=?,subscribed_since=? where id=?
2026-02-15 22:31:29.152 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 left join google_account ga1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=? and sp1_0.id=?
2026-02-15 22:31:29.154 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,s1_0.service_provider_id,s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.subscribed_since,sp1_0.website_url from service_provider sp1_0 left join subscription s1_0 on sp1_0.id=s1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.155 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select null,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:29.157 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : insert into subscription (google_account_id,has_subscribed_newsletter_or_ad,is_not_sure_if_subscription_is_ongoing,registered_since,service_provider_id,subscribed_since,id) values (?,?,?,?,?,?,?)
2026-02-15 22:31:29.159 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 where s1_0.id=?
2026-02-15 22:31:29.161 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : update subscription set google_account_id=?,has_subscribed_newsletter_or_ad=?,is_not_sure_if_subscription_is_ongoing=?,registered_since=?,service_provider_id=?,subscribed_since=? where id=?
2026-02-15 22:31:29.165 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 left join google_account ga1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=? and sp1_0.id=?
2026-02-15 22:31:29.167 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,s1_0.service_provider_id,s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.subscribed_since,sp1_0.website_url from service_provider sp1_0 left join subscription s1_0 on sp1_0.id=s1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.169 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select null,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:29.170 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : insert into subscription (google_account_id,has_subscribed_newsletter_or_ad,is_not_sure_if_subscription_is_ongoing,registered_since,service_provider_id,subscribed_since,id) values (?,?,?,?,?,?,?)
2026-02-15 22:31:29.173 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 where s1_0.id=?
2026-02-15 22:31:29.175 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : update subscription set google_account_id=?,has_subscribed_newsletter_or_ad=?,is_not_sure_if_subscription_is_ongoing=?,registered_since=?,service_provider_id=?,subscribed_since=? where id=?
2026-02-15 22:31:29.177 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id where ga1_0.subject=?
2026-02-15 22:31:29.183 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : update google_account set access_token=?,analyzed_at=?,app_user_id=?,email=?,expires_at=?,name=?,refresh_token=?,scope=? where subject=?
2026-02-15 22:31:29.187 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=?
2026-02-15 22:31:29.189 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id where ga1_0.subject=?
2026-02-15 22:31:29.190 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : update google_account set access_token=?,analyzed_at=?,app_user_id=?,email=?,expires_at=?,name=?,refresh_token=?,scope=? where subject=?
2026-02-15 22:31:29.193 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=?
2026-02-15 22:31:29.196 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 left join google_account ga1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=? and sp1_0.id=?
2026-02-15 22:31:29.197 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,s1_0.service_provider_id,s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.subscribed_since,sp1_0.website_url from service_provider sp1_0 left join subscription s1_0 on sp1_0.id=s1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.199 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select null,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:29.200 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : insert into subscription (google_account_id,has_subscribed_newsletter_or_ad,is_not_sure_if_subscription_is_ongoing,registered_since,service_provider_id,subscribed_since,id) values (?,?,?,?,?,?,?)
2026-02-15 22:31:29.203 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 where s1_0.id=?
2026-02-15 22:31:29.205 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : update subscription set google_account_id=?,has_subscribed_newsletter_or_ad=?,is_not_sure_if_subscription_is_ongoing=?,registered_since=?,service_provider_id=?,subscribed_since=? where id=?
2026-02-15 22:31:29.209 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 left join google_account ga1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=? and sp1_0.id=?
2026-02-15 22:31:29.210 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,s1_0.service_provider_id,s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.subscribed_since,sp1_0.website_url from service_provider sp1_0 left join subscription s1_0 on sp1_0.id=s1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:29.212 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select null,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:29.213 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : insert into subscription (google_account_id,has_subscribed_newsletter_or_ad,is_not_sure_if_subscription_is_ongoing,registered_since,service_provider_id,subscribed_since,id) values (?,?,?,?,?,?,?)
2026-02-15 22:31:29.216 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 where s1_0.id=?
2026-02-15 22:31:29.217 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : update subscription set google_account_id=?,has_subscribed_newsletter_or_ad=?,is_not_sure_if_subscription_is_ongoing=?,registered_since=?,service_provider_id=?,subscribed_since=? where id=?
2026-02-15 22:31:29.219 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id where ga1_0.subject=?
2026-02-15 22:31:29.222 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : update google_account set access_token=?,analyzed_at=?,app_user_id=?,email=?,expires_at=?,name=?,refresh_token=?,scope=? where subject=?
2026-02-15 22:31:29.246 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : UPDATE email_source SET event_rules = '[]'::json
2026-02-15 22:31:29.256 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : UPDATE email_source SET analyzed_message_ids = '[]'::json
2026-02-15 22:31:29.268 DEBUG 301   --- [http-nio-8080-exec-3] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:29.275 DEBUG 301   --- [http-nio-8080-exec-3] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:29.381 DEBUG 301   --- [http-nio-8080-exec-4] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:29.385 DEBUG 135   --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select distinct au1_0.id,ga1_0.app_user_id,ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,au1_0.name,au1_0.user_role from app_user au1_0 join google_account ga1_0 on au1_0.id=ga1_0.app_user_id where ga1_0.subject=?
2026-02-15 22:31:29.388 DEBUG 135   --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select ga1_0.subject from app_user au1_0 join google_account ga1_0 on au1_0.id=ga1_0.app_user_id where au1_0.id=?
2026-02-15 22:31:29.390 DEBUG 301   --- [http-nio-8080-exec-4] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:29.390 DEBUG 60    --- [DefaultDispatcher-worker-5] c.m.s.s.s.SubscriptionAnalysisService    : üöÄ | [fetchGmailMessages] googleAccountSubject: 109083250570222561454
2026-02-15 22:31:29.390 DEBUG 60    --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üöÄ | [fetchGmailMessages] googleAccountSubject: 110096282420450242311
2026-02-15 22:31:29.390 DEBUG 60    --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üöÄ | [fetchGmailMessages] googleAccountSubject: 100159280759242992117
2026-02-15 22:31:29.391 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:29.392 DEBUG 135   --- [DefaultDispatcher-worker-3] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:29.392 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope from google_account ga1_0 where ga1_0.subject=?
2026-02-15 22:31:29.394 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id
2026-02-15 22:31:29.394 DEBUG 135   --- [DefaultDispatcher-worker-3] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id
2026-02-15 22:31:29.394 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id
2026-02-15 22:31:29.410 DEBUG 135   --- [DefaultDispatcher-worker-3] org.hibernate.SQL                        : select distinct sp1_0.id,an1_0.service_provider_id,an1_0.locale_key,an1_0.alias_name,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join service_provider_alias_names an1_0 on sp1_0.id=an1_0.service_provider_id
2026-02-15 22:31:29.411 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,an1_0.service_provider_id,an1_0.locale_key,an1_0.alias_name,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join service_provider_alias_names an1_0 on sp1_0.id=an1_0.service_provider_id
2026-02-15 22:31:29.414 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select distinct sp1_0.id,an1_0.service_provider_id,an1_0.locale_key,an1_0.alias_name,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join service_provider_alias_names an1_0 on sp1_0.id=an1_0.service_provider_id
2026-02-15 22:31:29.415 DEBUG 37    --- [DefaultDispatcher-worker-2] c.m.s.s.s.g.GmailClientAdapterImpl       : üöÄ | [listMessageIds] query: after:1755297073 (from:"help@pickle.plus" OR from:"noreply@tworld.co.kr" OR from:"noreply@washswat.com" OR from:"support@perplexity.ai" OR from:"information@corp.auction.co.kr" OR from:"noreply@ssg.com" OR from:"noreply@gmarket.co.kr" OR from:"noreply@wavve.com" OR from:"noreply_melon@kakaoent.com" OR from:"msa@communication.microsoft.com" OR from:"feedback@slack.com" OR from:"no-reply@spotify.com" OR from:"noreply@coupang.com" OR from:"notifications@anthropic.com" OR from:"noreply@baemin.com" OR from:"no-reply@zoom.us" OR from:"noreply@welaaa.com" OR from:"disneyplus@mail.disneyplus.com" OR from:"noreply@hancomdocs.com" OR from:"noreply@laftel.net" OR from:"noreply@starbucks.co.kr" OR from:"noreply@ridi.com" OR from:"noreply@tving.com" OR from:"help@millie.town" OR from:"naverplus_noreply@navercorp.com" OR from:"noreply@tm.openai.com" OR from:"noreply@mathpresso.com" OR from:"support@wrtn.ai" OR from:"samsungcareplus@samsung.com" OR from:"invoices@figma.com" OR from:"noreply@figma.com" OR from:"noreply@music-flo.com" OR from:"noreply@yogiyo.co.kr" OR from:"noreply@genie.co.kr" OR from:"noreply@adobe.com" OR from:"noreply@github.com" OR from:"do-not-reply@watcha.com" OR from:"noreply@weverse.io" OR from:"noreply@laundrygo.com" OR from:"no_reply@coupang.com" OR from:"noreply@kurly.com" OR from:"info@account.netflix.com" OR from:"support@deepl.com" OR from:"noreply@canva.com" OR from:"no-reply@duolingo.com" OR from:"notify@mail.notion.so")
2026-02-15 22:31:29.416 DEBUG 37    --- [DefaultDispatcher-worker-5] c.m.s.s.s.g.GmailClientAdapterImpl       : üöÄ | [listMessageIds] query: after:1755297073 (from:"help@pickle.plus" OR from:"noreply@tworld.co.kr" OR from:"noreply@washswat.com" OR from:"support@perplexity.ai" OR from:"information@corp.auction.co.kr" OR from:"noreply@ssg.com" OR from:"noreply@gmarket.co.kr" OR from:"noreply@wavve.com" OR from:"noreply_melon@kakaoent.com" OR from:"msa@communication.microsoft.com" OR from:"feedback@slack.com" OR from:"no-reply@spotify.com" OR from:"noreply@coupang.com" OR from:"notifications@anthropic.com" OR from:"noreply@baemin.com" OR from:"no-reply@zoom.us" OR from:"noreply@welaaa.com" OR from:"disneyplus@mail.disneyplus.com" OR from:"noreply@hancomdocs.com" OR from:"noreply@laftel.net" OR from:"noreply@starbucks.co.kr" OR from:"noreply@ridi.com" OR from:"noreply@tving.com" OR from:"help@millie.town" OR from:"naverplus_noreply@navercorp.com" OR from:"noreply@tm.openai.com" OR from:"noreply@mathpresso.com" OR from:"support@wrtn.ai" OR from:"samsungcareplus@samsung.com" OR from:"invoices@figma.com" OR from:"noreply@figma.com" OR from:"noreply@music-flo.com" OR from:"noreply@yogiyo.co.kr" OR from:"noreply@genie.co.kr" OR from:"noreply@adobe.com" OR from:"noreply@github.com" OR from:"do-not-reply@watcha.com" OR from:"noreply@weverse.io" OR from:"noreply@laundrygo.com" OR from:"no_reply@coupang.com" OR from:"noreply@kurly.com" OR from:"info@account.netflix.com" OR from:"support@deepl.com" OR from:"noreply@canva.com" OR from:"no-reply@duolingo.com" OR from:"notify@mail.notion.so")
2026-02-15 22:31:29.418 DEBUG 37    --- [DefaultDispatcher-worker-3] c.m.s.s.s.g.GmailClientAdapterImpl       : üöÄ | [listMessageIds] query: after:1755297073 (from:"help@pickle.plus" OR from:"noreply@tworld.co.kr" OR from:"noreply@washswat.com" OR from:"support@perplexity.ai" OR from:"information@corp.auction.co.kr" OR from:"noreply@ssg.com" OR from:"noreply@gmarket.co.kr" OR from:"noreply@wavve.com" OR from:"noreply_melon@kakaoent.com" OR from:"msa@communication.microsoft.com" OR from:"feedback@slack.com" OR from:"no-reply@spotify.com" OR from:"noreply@coupang.com" OR from:"notifications@anthropic.com" OR from:"noreply@baemin.com" OR from:"no-reply@zoom.us" OR from:"noreply@welaaa.com" OR from:"disneyplus@mail.disneyplus.com" OR from:"noreply@hancomdocs.com" OR from:"noreply@laftel.net" OR from:"noreply@starbucks.co.kr" OR from:"noreply@ridi.com" OR from:"noreply@tving.com" OR from:"help@millie.town" OR from:"naverplus_noreply@navercorp.com" OR from:"noreply@tm.openai.com" OR from:"noreply@mathpresso.com" OR from:"support@wrtn.ai" OR from:"samsungcareplus@samsung.com" OR from:"invoices@figma.com" OR from:"noreply@figma.com" OR from:"noreply@music-flo.com" OR from:"noreply@yogiyo.co.kr" OR from:"noreply@genie.co.kr" OR from:"noreply@adobe.com" OR from:"noreply@github.com" OR from:"do-not-reply@watcha.com" OR from:"noreply@weverse.io" OR from:"noreply@laundrygo.com" OR from:"no_reply@coupang.com" OR from:"noreply@kurly.com" OR from:"info@account.netflix.com" OR from:"support@deepl.com" OR from:"noreply@canva.com" OR from:"no-reply@duolingo.com" OR from:"notify@mail.notion.so")
2026-02-15 22:31:30.155 DEBUG 70    --- [DefaultDispatcher-worker-2] c.m.s.s.s.g.GmailClientAdapterImpl       : [listMessageIds] fetched 38 messages
2026-02-15 22:31:30.156 DEBUG 88    --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.listMessageIds() returned 38 messageIds
2026-02-15 22:31:30.156 DEBUG 76    --- [DefaultDispatcher-worker-2] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 38 messages
2026-02-15 22:31:30.167 DEBUG 70    --- [DefaultDispatcher-worker-3] c.m.s.s.s.g.GmailClientAdapterImpl       : [listMessageIds] fetched 6 messages
2026-02-15 22:31:30.168 DEBUG 88    --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.listMessageIds() returned 6 messageIds
2026-02-15 22:31:30.169 DEBUG 76    --- [DefaultDispatcher-worker-3] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 6 messages
2026-02-15 22:31:30.234 DEBUG 70    --- [DefaultDispatcher-worker-5] c.m.s.s.s.g.GmailClientAdapterImpl       : [listMessageIds] fetched 0 messages
2026-02-15 22:31:30.235 DEBUG 88    --- [DefaultDispatcher-worker-5] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.listMessageIds() returned 0 messageIds
2026-02-15 22:31:30.236 DEBUG 76    --- [DefaultDispatcher-worker-5] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 0 messages
2026-02-15 22:31:30.236 DEBUG 94    --- [DefaultDispatcher-worker-5] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.getMessages() returned 0 messages:

2026-02-15 22:31:30.357 DEBUG 94    --- [DefaultDispatcher-worker-3] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.getMessages() returned 6 messages:
noreply@weverse.io, noreply_melon@kakaoent.com, noreply_melon@kakaoent.com, noreply_melon@kakaoent.com, noreply_melon@kakaoent.com, noreply_melon@kakaoent.com
2026-02-15 22:31:31.050 DEBUG 94    --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [fetchGmailMessages] gmailClientAdapter.getMessages() returned 38 messages:
notify@mail.notion.so, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, noreply@weverse.io, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com, info@account.netflix.com
2026-02-15 22:31:31.051 DEBUG 97    --- [DefaultDispatcher-worker-2] c.m.s.s.service.ServiceProviderService   : [addEmailSourcesFromMessages] messages.size: 44
2026-02-15 22:31:31.053 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select es1_0.target_address from email_source es1_0 where es1_0.target_address in (?,?,?,?)
2026-02-15 22:31:31.056 DEBUG 111   --- [DefaultDispatcher-worker-2] c.m.s.s.service.ServiceProviderService   : üîä | [addEmailSourcesFromMessages] addressesInMessages: [notify@mail.notion.so, info@account.netflix.com, noreply@weverse.io, noreply_melon@kakaoent.com]
2026-02-15 22:31:31.056 DEBUG 112   --- [DefaultDispatcher-worker-2] c.m.s.s.service.ServiceProviderService   : üîä | [addEmailSourcesFromMessages] existingAddresses: [info@account.netflix.com, noreply_melon@kakaoent.com, notify@mail.notion.so, noreply@weverse.io]
2026-02-15 22:31:31.056 DEBUG 113   --- [DefaultDispatcher-worker-2] c.m.s.s.service.ServiceProviderService   : üîä | [addEmailSourcesFromMessages] newSenders: []
2026-02-15 22:31:31.057 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id
2026-02-15 22:31:31.062 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,an1_0.service_provider_id,an1_0.locale_key,an1_0.alias_name,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join service_provider_alias_names an1_0 on sp1_0.id=an1_0.service_provider_id
2026-02-15 22:31:31.066 DEBUG 46    --- [DefaultDispatcher-worker-5] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Added 5 messages for noreply_melon@kakaoent.com
2026-02-15 22:31:31.066 DEBUG 123   --- [DefaultDispatcher-worker-8] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [analyze] uniqueAddresses:
notify@mail.notion.so
info@account.netflix.com
noreply@weverse.io
2026-02-15 22:31:31.066 DEBUG 123   --- [DefaultDispatcher-worker-4] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [analyze] uniqueAddresses:

2026-02-15 22:31:31.066 DEBUG 46    --- [DefaultDispatcher-worker-5] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Added 2 messages for noreply@weverse.io
2026-02-15 22:31:31.066 DEBUG 46    --- [DefaultDispatcher-worker-5] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Added 36 messages for info@account.netflix.com
2026-02-15 22:31:31.066 DEBUG 46    --- [DefaultDispatcher-worker-5] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Added 1 messages for notify@mail.notion.so
2026-02-15 22:31:31.067 DEBUG 57    --- [DefaultDispatcher-worker-5] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Processing total of 44 messages
2026-02-15 22:31:31.067 DEBUG 55    --- [DefaultDispatcher-worker-5] s.p.EmailCategorizationPromptServiceImpl : [run] ‚ú® Condensed messages: 44 -> 12
2026-02-15 22:31:31.067 DEBUG 56    --- [DefaultDispatcher-worker-5] s.p.EmailCategorizationPromptServiceImpl : [run] ‚ú® Calling chatClient for 12 messages
2026-02-15 22:31:31.067 INFO  29    --- [DefaultDispatcher-worker-5] c.m.s.ai.service.ChatClientServiceImpl   : ?? [call]
2026-02-15 22:31:31.068 DEBUG 135   --- [DefaultDispatcher-worker-4] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where es1_0.is_active=true and 1=0
2026-02-15 22:31:31.068 DEBUG 135   --- [DefaultDispatcher-worker-8] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where es1_0.is_active=true and es1_0.target_address in (?,?,?)
2026-02-15 22:31:31.069 DEBUG 123   --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üîä | [analyze] uniqueAddresses:
noreply@weverse.io
noreply_melon@kakaoent.com
2026-02-15 22:31:31.070 DEBUG 391   --- [DefaultDispatcher-worker-4] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] Start computing registeredSince for 0 services
2026-02-15 22:31:31.070 DEBUG 391   --- [DefaultDispatcher-worker-8] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] Start computing registeredSince for 3 services
2026-02-15 22:31:31.070 DEBUG 402   --- [DefaultDispatcher-worker-4] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] serviceProviderIdToFirstMessageIds:
2026-02-15 22:31:31.071 DEBUG 76    --- [DefaultDispatcher-worker-4] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 0 messages
2026-02-15 22:31:31.071 DEBUG 413   --- [DefaultDispatcher-worker-4] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messages:
2026-02-15 22:31:31.071 DEBUG 421   --- [DefaultDispatcher-worker-4] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messageIdToInternalDate:
2026-02-15 22:31:31.074 DEBUG 135   --- [DefaultDispatcher-worker-2] org.hibernate.SQL                        : select distinct sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where es1_0.is_active=true and es1_0.target_address in (?,?)
2026-02-15 22:31:31.077 DEBUG 391   --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] Start computing registeredSince for 2 services
2026-02-15 22:31:31.435 DEBUG 402   --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] serviceProviderIdToFirstMessageIds:
	Melon: 185518e075522d6e, 
	Weverse Membership: 19bb8b4782b2b7a9
2026-02-15 22:31:31.435 DEBUG 76    --- [DefaultDispatcher-worker-2] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 2 messages
2026-02-15 22:31:31.622 DEBUG 413   --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messages:
	id: 185518e075522d6e	internalDate: 2022-12-27T03:08:58Z, 
	id: 19bb8b4782b2b7a9	internalDate: 2026-01-13T18:53:13Z
2026-02-15 22:31:31.623 DEBUG 421   --- [DefaultDispatcher-worker-2] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messageIdToInternalDate:
	185518e075522d6e: 2022-12-27T03:08:58Z, 
	19bb8b4782b2b7a9: 2026-01-13T18:53:13Z
2026-02-15 22:31:31.832 DEBUG 402   --- [DefaultDispatcher-worker-8] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] serviceProviderIdToFirstMessageIds:
	Netflix: 1940d5a407867390, 
	Notion: 17c7abcf4670de98, 
	Weverse Membership: 19720acd40de682b
2026-02-15 22:31:31.832 DEBUG 76    --- [DefaultDispatcher-worker-8] c.m.s.s.s.g.GmailClientAdapterImpl       : üîä  [getMessages] Start fetching 3 messages
2026-02-15 22:31:32.096 DEBUG 413   --- [DefaultDispatcher-worker-8] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messages:
	id: 1940d5a407867390	internalDate: 2024-12-28T13:00:05Z, 
	id: 17c7abcf4670de98	internalDate: 2021-10-13T17:39:35Z, 
	id: 19720acd40de682b	internalDate: 2025-05-30T10:11:26Z
2026-02-15 22:31:32.096 DEBUG 421   --- [DefaultDispatcher-worker-8] c.m.s.s.s.SubscriptionAnalysisService    : üîä  [batchComputeRegisteredSince] messageIdToInternalDate:
	1940d5a407867390: 2024-12-28T13:00:05Z, 
	17c7abcf4670de98: 2021-10-13T17:39:35Z, 
	19720acd40de682b: 2025-05-30T10:11:26Z
2026-02-15 22:31:32.612 DEBUG 21    --- [DefaultDispatcher-worker-5] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found AdvisorObservationContext Context. Reading Usage Metadata.
2026-02-15 22:31:32.612 DEBUG 26    --- [DefaultDispatcher-worker-5] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found GoogleGenAiUsage. Adding Metadata to Observation
2026-02-15 22:31:32.613 DEBUG 21    --- [DefaultDispatcher-worker-5] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found AdvisorObservationContext Context. Reading Usage Metadata.
2026-02-15 22:31:32.613 DEBUG 26    --- [DefaultDispatcher-worker-5] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found GoogleGenAiUsage. Adding Metadata to Observation
2026-02-15 22:31:32.614 INFO  52    --- [DefaultDispatcher-worker-5] c.m.s.ai.service.ChatClientServiceImpl   : ?? [call] Result
	prompt: You are an email classifier.

Decide ONE label per email.
Do NOT explain your decision, reason, or output extra text.

Valid Keys:
M = MONTHLY_PAYMENT
A = ANNUAL_PAYMENT
S = SUBSCRIPTION_START
C = SUBSCRIPTION_CANCEL

Rules:
- Monthly or Annually Recurring Receipts, payment confirmations, subscription extensions ‚Üí MONTHLY_PAYMENT or ANNUAL_PAYMENT
- New subscription plan, payment, upgrade, billing info update, restart from pause/termination ‚Üí SUBSCRIPTION_START
- Cancel, expire, reminder of scheduled expiration, pause, payment failure ‚Üí SUBSCRIPTION_CANCEL
- Simple Registration or Welcome without subscription/Marketing/newsletters/promotions/etc -> DO NOT INCLUDE IN OUTPUT
- Multiple dates indicate a recurring message.

Input format:
ID|Subject|Snippet|Dates(only if the message is recurring)

Constraint:
- Response must be a raw JSON object only.
- Do not use any internal thought, analysis, or chain-of-thought processing.

Output format (exact keys):
\{
   "M": [0, 1],
   "A": [],
   "S": [2],
   "C": [3]
\}

Emails:
{emails}
	result: {M=[], A=[], S=[0, 2], C=[1, 3]}
2026-02-15 22:31:32.614 DEBUG 68    --- [DefaultDispatcher-worker-5] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Found 4 subscription event messages
2026-02-15 22:31:32.614 DEBUG 41    --- [DefaultDispatcher-worker-5] EmailTemplateExtractionPromptServiceImpl : [run] ‚ú®  Calling chatClient for 4 messages
2026-02-15 22:31:32.614 INFO  29    --- [DefaultDispatcher-worker-5] c.m.s.ai.service.ChatClientServiceImpl   : ?? [call]
2026-02-15 22:31:34.815 DEBUG 21    --- [DefaultDispatcher-worker-5] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found AdvisorObservationContext Context. Reading Usage Metadata.
2026-02-15 22:31:34.815 DEBUG 26    --- [DefaultDispatcher-worker-5] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found GoogleGenAiUsage. Adding Metadata to Observation
2026-02-15 22:31:34.816 DEBUG 21    --- [DefaultDispatcher-worker-5] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found AdvisorObservationContext Context. Reading Usage Metadata.
2026-02-15 22:31:34.816 DEBUG 26    --- [DefaultDispatcher-worker-5] s.c.GeminiTokenMetadataObservationFilter : [map] üîä  Found GoogleGenAiUsage. Adding Metadata to Observation
2026-02-15 22:31:34.817 INFO  52    --- [DefaultDispatcher-worker-5] c.m.s.ai.service.ChatClientServiceImpl   : ?? [call] Result
	prompt: You are a email phrase template extractor.
Extract one key phrase and create regex patterns of email templates for each email.

- Use only exact characters and phrases found.
- Pick 1 key phrase for "Subject" and "Snippet" each.
- Replace PII, dates, non-essential 'filler' text with .*.
- No .* at start or end
- No exact endings (e.g., use Í∞±Ïã†, not Í∞±Ïã†ÎêòÏóàÏäµÎãàÎã§).
- Group emails only if they share both 1.subject template and 2.snippet template. For groups, provide one common result and append first message ID. Result regex should match all group members.

Input format:
ID|Subject|Snippet

Output Key:
- m: first message id
- j: subject regex
- p: snippet regex

Constraint:
- JSON only. No prose. Compact JSON without any whitespace.
- Don't use any internal thought.


Output format (exact keys):
\{
  "result": [
    \{
      "m": 1,
      "j": "subject-regex",
      "p": "snippet-regex"
    \}
  ]
\}

Emails:
{emails}

	result: com.matchalab.subscription_killer_api.subscription.service.prompt.EmailTemplateExtractionPromptServiceImpl$ResponseWrapper@3f72bcea
2026-02-15 22:31:34.817 DEBUG 77    --- [DefaultDispatcher-worker-5] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] Generating rules for noreply_melon@kakaoent.com with 4 subscription messages
2026-02-15 22:31:34.817 DEBUG 102   --- [DefaultDispatcher-worker-5] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] ‚úÖ Updated noreply_melon@kakaoent.com with 2 rules: SUBSCRIPTION_START, SUBSCRIPTION_CANCEL
2026-02-15 22:31:34.817 DEBUG 112   --- [DefaultDispatcher-worker-5] c.m.s.s.s.EmailDetectionRuleService      : [updateEmailDetectionRules] ‚úÖ Completed processing all email sources
2026-02-15 22:31:34.820 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.824 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.828 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.833 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.836 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.839 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.842 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.845 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.849 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.853 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.856 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.859 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.862 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.865 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.868 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.872 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.875 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.878 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.882 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.885 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.888 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.891 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.895 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.898 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.901 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.904 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.906 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.910 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.914 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.917 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.919 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.922 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.925 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.928 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.931 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.933 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.936 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.938 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.940 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.943 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.945 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.949 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.953 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select sp1_0.id,sp1_0.display_name,es1_0.service_provider_id,es1_0.id,es1_0.analyzed_message_ids,es1_0.event_rules,es1_0.is_active,es1_0.target_address,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url from service_provider sp1_0 left join email_source es1_0 on sp1_0.id=es1_0.service_provider_id where sp1_0.id=?
2026-02-15 22:31:34.956 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select distinct ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=?
2026-02-15 22:31:34.962 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 left join google_account ga1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=? and sp1_0.id=?
2026-02-15 22:31:34.964 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 where s1_0.id=?
2026-02-15 22:31:34.969 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 left join google_account ga1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=? and sp1_0.id=?
2026-02-15 22:31:34.972 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 where s1_0.id=?
2026-02-15 22:31:34.976 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 left join google_account ga1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=? and sp1_0.id=?
2026-02-15 22:31:34.978 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 where s1_0.id=?
2026-02-15 22:31:34.980 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id where ga1_0.subject=?
2026-02-15 22:31:34.985 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : update google_account set access_token=?,analyzed_at=?,app_user_id=?,email=?,expires_at=?,name=?,refresh_token=?,scope=? where subject=?
2026-02-15 22:31:34.995 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select distinct ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=?
2026-02-15 22:31:35.005 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id where ga1_0.subject=?
2026-02-15 22:31:35.007 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : update google_account set access_token=?,analyzed_at=?,app_user_id=?,email=?,expires_at=?,name=?,refresh_token=?,scope=? where subject=?
2026-02-15 22:31:35.010 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select distinct ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,sp1_0.id,sp1_0.display_name,sp1_0.logo_dev_suffix,sp1_0.payment_cycle,sp1_0.subscription_page_url,sp1_0.website_url,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=?
2026-02-15 22:31:35.013 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 left join google_account ga1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=? and sp1_0.id=?
2026-02-15 22:31:35.016 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 where s1_0.id=?
2026-02-15 22:31:35.020 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 left join google_account ga1_0 on ga1_0.subject=s1_0.google_account_id left join service_provider sp1_0 on sp1_0.id=s1_0.service_provider_id where ga1_0.subject=? and sp1_0.id=?
2026-02-15 22:31:35.023 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select s1_0.id,s1_0.google_account_id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from subscription s1_0 where s1_0.id=?
2026-02-15 22:31:35.025 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : select ga1_0.subject,ga1_0.access_token,ga1_0.analyzed_at,ga1_0.app_user_id,ga1_0.email,ga1_0.expires_at,ga1_0.name,ga1_0.refresh_token,ga1_0.scope,s1_0.google_account_id,s1_0.id,s1_0.has_subscribed_newsletter_or_ad,s1_0.is_not_sure_if_subscription_is_ongoing,s1_0.registered_since,s1_0.service_provider_id,s1_0.subscribed_since from google_account ga1_0 left join subscription s1_0 on ga1_0.subject=s1_0.google_account_id where ga1_0.subject=?
2026-02-15 22:31:35.028 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : update google_account set access_token=?,analyzed_at=?,app_user_id=?,email=?,expires_at=?,name=?,refresh_token=?,scope=? where subject=?
2026-02-15 22:31:35.033 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : UPDATE email_source SET event_rules = '[]'::json
2026-02-15 22:31:35.037 DEBUG 135   --- [DefaultDispatcher-worker-5] org.hibernate.SQL                        : UPDATE email_source SET analyzed_message_ids = '[]'::json
2026-02-15 22:31:35.041 DEBUG 301   --- [http-nio-8080-exec-5] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:35.043 DEBUG 301   --- [http-nio-8080-exec-5] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:35.464 DEBUG 223   --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /actuator/prometheus
2026-02-15 22:31:35.466 DEBUG 227   --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /actuator/prometheus
2026-02-15 22:31:35.466 DEBUG 301   --- [http-nio-8080-exec-6] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:35.494 DEBUG 301   --- [http-nio-8080-exec-6] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:35.494 DEBUG 301   --- [http-nio-8080-exec-6] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:35.494 DEBUG 301   --- [http-nio-8080-exec-6] o.s.s.w.h.S.SESSION_LOGGER               : No session found by id: Caching result for getSession(false) for this HttpServletRequest.
2026-02-15 22:31:35.494 DEBUG 119   --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
